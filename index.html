<!DOCTYPE html>
<html lang="en">

<head>
  <title>Advanced Objects</title>
</head>

<body>
  <h1>Advanced Objects</h1>
  <p>Please load this file in VSCode and Chrome, and open the Console in Chrome Dev Tools.</p>
  <p>Work through the challenges found inside the script tag in this document,
    until the Console reports all tests passing.</p>

  <script>
    // In CHALLENGES 1-4 you will flesh out some classes.

    // To do this, translate each üß† set of instructions into a working class.
    // ‚ùó Classes are scaffolded for you.
    // ‚ùó Watch the Guided Project to learn proper debugging technique.

    // üëâ CHALLENGE 1
    class PeterPan {
    constructor(name) {
        this.name = name;
        this.age = 0;
    }

    ageGracefully() {
        if (this.age < 12) {
            this.age += 1;
        }
    }
}

    // üëâ CHALLENGE 2
    class AirPlane {
    constructor(model) {
        this.model = model;
        this.altitude = 0;
    }

    up(meters) {
        this.altitude += meters;
        return this.altitude;
    }

    down(meters) {
        if (this.altitude - meters < 0) {
            this.altitude = 0;
            return "CRASH!";
        } else {
            this.altitude -= meters;
            return this.altitude;
        }
    }
}


    // üëâ CHALLENGE 3
    class Bulb {
    constructor() {
        this.isOn = false; // Initial value of isOn is false
    }

    turnOn() {
        this.isOn = true;
        return "You turned the bulb ON";
    }

    turnOff() {
        this.isOn = false;
        return "You turned the bulb OFF";
    }

    toggle() {
        this.isOn = !this.isOn;
        return this.isOn ? "You turned the bulb ON" : "You turned the bulb OFF";
    }
}


    // üëâ CHALLENGE 4
    class CountDown {
    constructor(start) {
        this.current = start; // Initialize the countdown starting number
    }

    count() {
        if (this.current > 0) {
            const result = `${this.current}!`; // Return the current number with "!"
            this.current--; // Decrement the current count
            return result;
        } else if (this.current === 0) {
            this.current--; // Prepare for the next call after liftoff
            return "Liftoff!"; // Return "Liftoff!" when reaching zero
        } else {
            return null; // Return null after liftoff
        }
    }
}
   

    // üß™ TESTS, do not work below this line
    // üß™ TESTS, do not work below this line
    // üß™ TESTS, do not work below this line
    {
      runTest('CHALLENGE 1 - PeterPan', [
        function () {
          let actual, description = 'The person ages normally until age 12'
          let expected = { name: 'Joe', age: 12 }
          try {
            actual = new PeterPan('Joe');
            [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].forEach(round => actual.ageGracefully())
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'The person does not age beyond 12 years old'
          let expected = { name: 'Joe', age: 12 }
          try {
            actual = new PeterPan('Joe');
            [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14].forEach(round => actual.ageGracefully())
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        }
      ])
      runTest('CHALLENGE 2 - Airplane', [
        function () {
          let actual, description = 'New plane has model and altitude properties'
          let expected = { model: 'Spitfire', altitude: 0 }
          try {
            actual = new AirPlane('Spitfire')
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'New plane has an up method that increases altitude'
          let expected = { model: 'Spitfire', altitude: 10 }
          try {
            actual = new AirPlane('Spitfire')
            actual.up(4)
            actual.up(6)
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'The up method returns the updated altitude'
          let expected = 10
          try {
            let plane = new AirPlane('Spitfire')
            plane.up(4)
            actual = plane.up(6)
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'New plane has a down method that decreases altitude'
          let expected = 7
          try {
            let plane = new AirPlane('Spitfire')
            plane.altitude = 10
            plane.down(3)
            actual = plane.altitude
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'The down method returns the updated altitude'
          let expected = 8
          try {
            let plane = new AirPlane('Spitfire')
            plane.altitude = 11
            actual = plane.down(3)
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'A crashed plane has altitude 0'
          let expected = 0
          try {
            let plane = new AirPlane('Spitfire')
            plane.altitude = 10
            plane.down(11)
            actual = plane.altitude
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'The down method returns CRASH! if we crash the plane'
          let expected = "CRASH!"
          try {
            let plane = new AirPlane('Spitfire')
            plane.altitude = 10
            actual = plane.down(11)
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
      ])
      runTest('CHALLENGE 3 - Bulb', [
        function () {
          let actual, description = 'New bulbs have an isOn property with a value of false'
          let expected = { isOn: false }
          try {
            actual = new Bulb()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'A new bulb can be turned on'
          let expected = { isOn: true }
          try {
            actual = new Bulb()
            actual.turnOn()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'Turning on a bulb returns the right string'
          let expected = "You turned the bulb ON"
          try {
            let bulb = new Bulb()
            actual = bulb.turnOn()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'A bulb that is on can be turned off'
          let expected = { isOn: false }
          try {
            actual = new Bulb()
            actual.isOn = true
            actual.turnOff()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'Turning off a bulb returns the right string'
          let expected = "You turned the bulb OFF"
          try {
            let bulb = new Bulb()
            bulb.isOn = true
            actual = bulb.turnOff()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'An off bulb can be toggled on'
          let expected = { isOn: true }
          try {
            actual = new Bulb()
            actual.toggle()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'An on bulb can be toggled off'
          let expected = { isOn: false }
          try {
            actual = new Bulb()
            actual.isOn = true
            actual.toggle()
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'Toggling multiple times works as expected'
          let expected = [true, false, true]
          try {
            let bulb = new Bulb()
            actual = []
            bulb.toggle()
            actual.push(bulb.isOn)
            bulb.toggle()
            actual.push(bulb.isOn)
            bulb.toggle()
            actual.push(bulb.isOn)
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'Toggling returns the proper messages'
          let expected = ["You turned the bulb ON", "You turned the bulb OFF", "You turned the bulb ON"]
          try {
            let bulb = new Bulb()
            actual = []
            actual.push(bulb.toggle())
            actual.push(bulb.toggle())
            actual.push(bulb.toggle())
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
      ])
      runTest('CHALLENGE 4 - CountDown', [
        function () {
          let actual, description = 'Calling count returns the proper number'
          let expected = ["4!", "3!", "2!", "1!"]
          try {
            let minusFour = new CountDown(4)
            actual = []
            actual.push(minusFour.count())
            actual.push(minusFour.count())
            actual.push(minusFour.count())
            actual.push(minusFour.count())
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'Upon reaching zero, count returns Liftoff!'
          let expected = ["3!", "2!", "1!", "Liftoff!"]
          try {
            let minusThree = new CountDown(3)
            actual = []
            actual.push(minusThree.count())
            actual.push(minusThree.count())
            actual.push(minusThree.count())
            actual.push(minusThree.count())
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
        function () {
          let actual, description = 'After liftoff, count always returns null'
          let expected = ["2!", "1!", "Liftoff!", null, null]
          try {
            let minusTwo = new CountDown(2)
            actual = []
            actual.push(minusTwo.count())
            actual.push(minusTwo.count())
            actual.push(minusTwo.count())
            actual.push(minusTwo.count())
            actual.push(minusTwo.count())
          } catch (err) { actual = err.message }
          return [description, expected, actual]
        },
      ])
      function runTest(testTitle, tests) {
        console.log(testTitle)
        tests.forEach((test, idx) => {
          const [description, expected, actual] = test().map(JSON.stringify)
          if (expected === actual) {
            console.log(`\t‚úÖ Test ${idx + 1} ${description} PASSED`)
          } else {
            console.log(`\t‚ùå Test ${idx + 1} ${description} FAILED:
          üíÄ Expected ${expected} but got ${actual}`)
          }
        })
      }
    }
  </script>
</body>

</html>